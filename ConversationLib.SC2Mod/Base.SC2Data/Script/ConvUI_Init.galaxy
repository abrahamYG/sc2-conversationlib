include "Script/ConvUI/Conversations/main";
include "Script/ConvUI/Characters/main";
include "Script/ConvUI/Callbacks/main";

include "Script/ConvUI/CConversationGetById";
include "Script/ConvUI_Debug";

ConversationCallback ConvUI_ManagedCallbacks;
int ConvUI_ManagedConversationCount = 0;

int ConvUI_NewManagedConversation(string convid){
	string key = "ConvUI_ManagedConversation[{id}]";
	int index = ConvUI_ManagedConversationCount;
	key = StringReplaceWord(key,"{id}",convid,1,true);
	if(DataTableValueExists(true,key)){
		index = DataTableGetInt(true,key);
	}
	else{
		if(index<CConversationArraySize){
			DataTableSetInt(true,key,index);
			ConvUI_CConversationCreateFromData(ConvUI_CConversations[index],convid);
			ConvUI_ManagedConversationCount = index+1;
		}
		else{
			index = -1;
		}
	}
	return index;
}


void ConvUI_Init(){
	//trigger t = TriggerCreate("DummyTrigger");
	//TriggerExecute(t,false,false);
	ConvUI_BriefingUIInit();
	ConvUI_DebugInit();
}
