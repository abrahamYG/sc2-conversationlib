include "Script/Classes/Character_h";
include "Script/Classes/Conversation_h";

CConversationArray ConvUI_CConversations;

static void SConversationLineCallbackFunc(CConversationRef Conversation, SConversationLineRef Line, CCharacterRef Character, int index);
typedef funcref<SConversationLineCallbackFunc> SConversationLineCallback;
static void SConversationChoiceCallbackFunc(CConversationRef Conversation, SConversationChoiceRef Choice, CCharacterRef Character, int index);
typedef funcref<SConversationChoiceCallbackFunc> SConversationChoiceCallback;
static void SConversationWaitCallbackFunc(CConversationRef Conversation, SConversationWaitRef WaitRef, int index);
typedef funcref<SConversationWaitCallbackFunc> SConversationWaitCallback;
static void SConversationRunActionsCallbackFunc(CConversationRef Conversation, SConversationRunActionsRef RunActions, int index);
typedef funcref<SConversationRunActionsCallbackFunc> SConversationRunActionsCallback;
static void SConversationCommentCallbackFunc(CConversationRef Conversation, SConversationCommentRef Comment, int index);
typedef funcref<SConversationCommentCallbackFunc> SConversationCommentCallback;
static void SConversationJumpCallbackFunc(CConversationRef Conversation, SConversationJumpRef Jump, int index);
typedef funcref<SConversationJumpCallbackFunc> SConversationJumpCallback;
static void SConversationGroupCallbackFunc(CConversationRef Conversation, SConversationGroupRef Group, int index);
typedef funcref<SConversationGroupCallbackFunc> SConversationGroupCallback;


struct ConversationCallback{
	SConversationLineCallback LineCallback;
	SConversationChoiceCallback ChoiceCallback;
	SConversationWaitCallback WaitCallback;
	SConversationRunActionsCallback RunActionsCallback;
	SConversationCommentCallback CommentCallback;
	SConversationJumpCallback JumpCallback;
	SConversationGroupCallback GroupCallback;

};

typedef structref<ConversationCallback> ConversationCallbackRef;

int ConvUI_CConversationJumpGetById(CConversationRef Conversation, string id);
int ConvUI_CConversationCommentGetById(CConversationRef Conversation, string id);
int ConvUI_CConversationRunActionsGetById(CConversationRef Conversation, string id);
int ConvUI_CConversationWaitGetById(CConversationRef Conversation, string id);
int ConvUI_CConversationChoiceGetById(CConversationRef Conversation, string id);
int ConvUI_CConversationLineGetById(CConversationRef Conversation, string id);
int ConvUI_CConversationGroupGetById(CConversationRef Conversation, string id);
int ConvUI_SConversationGroupGetChildrenCount(CConversationRef Conversation, SConversationGroupRef Group);

string ConvUI_SConversationConditionCreateFromData(SConversationConditionRef Condition, string convId, string Field, int index);
string ConvUI_SConversationActionCreateFromData(SConversationActionRef Action, string convId, string Field, int index);

string ConvUI_SConversationRunActionsCreateFromData(SConversationRunActionsRef RunActions, string convId, string Field, int index);
string ConvUI_SConversationGroupCreateFromData(SConversationGroupRef Group, string convId, string Field, int index);
string ConvUI_SConversationLineCreateFromData(SConversationLineRef Line, string convId, string Field, int index);
string ConvUI_SConversationChoiceCreateFromData(SConversationChoiceRef Choice, string convId, string Field, int index);
string ConvUI_SConversationWaitCreateFromData(SConversationWaitRef WaitRef, string convId, string Field, int index);
TConversationItemId ConvUI_TConversationItemIdCreateFromData(string convId, int index);
string ConvUI_CConversationCreateFromData(CConversationRef Conversation,string convId);
//void ConvUI_ConversationRun(CConversationRef Conversation,arrayref<CCharacterArray> Characters,SConversationLineCallback Callback);
void ConvUI_ConversationRun(CConversationRef Conversation,arrayref<CCharacterArray> Characters,ConversationCallbackRef CallbackSet);