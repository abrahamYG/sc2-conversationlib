include "Script/Classes/Character_h";
include "Script/Classes/Conversation_h";

CConversationArray ConvUI_CConversations;

static void SConversationLineCallbackFunc(CConversationRef Conversation, SConversationLineRef Line, CCharacterRef Character, int index);
typedef funcref<SConversationLineCallbackFunc> SConversationLineCallback;
static void SConversationChoiceCallbackFunc(CConversationRef Conversation, SConversationChoiceRef Choice, CCharacterRef Character, int index);
typedef funcref<SConversationChoiceCallbackFunc> SConversationChoiceCallback;
static void SConversationWaitCallbackFunc(CConversationRef Conversation, SConversationWaitRef WaitRef, int index);
typedef funcref<SConversationWaitCallbackFunc> SConversationWaitCallback;



struct ConversationCallback{
	SConversationLineCallback LineCallback;
	SConversationChoiceCallback ChoiceCallback;
	SConversationWaitCallback WaitCallback;

};

typedef structref<ConversationCallback> ConversationCallbackRef;

string ConvUI_SConversationGroupCreateFromData(SConversationGroupRef Group, string convId, int index);
string ConvUI_SConversationLineCreateFromData(SConversationLineRef Line, string convId, int index);
string ConvUI_SConversationChoiceFromData(SConversationChoiceRef Choice, string convId, int index);
string ConvUI_SConversationWaitFromData(SConversationWaitRef WaitRef, string convId, int index);
string ConvUI_CConversationCreateFromData(CConversationRef Conversation,string convId);
//void ConvUI_ConversationRun(CConversationRef Conversation,arrayref<CCharacterArray> Characters,SConversationLineCallback Callback);
void ConvUI_ConversationRun(CConversationRef Conversation,arrayref<CCharacterArray> Characters,ConversationCallbackRef CallbackSet);